<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Twitch Pubsub &amp; Chat Integration for Unity: Usage Instructions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">Twitch Pubsub &amp; Chat Integration for Unity
   </div>
   <div id="projectbrief">A Unity Asset by Firesplash Entertainment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Usage Instructions </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_mainpage"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Support</h1>
<p >Thank you for buying our asset.</p>
<p >Unfortunately sometimes customers leave negative ratings and complain about things not working without contacting us so we can not help or fix the issue. We want to provide good support and have our customers having a great time developing their content, so:</p>
<p ><b>If you happen to encounter any issues, please write an email to <a href="#" onclick="location.href='mai'+'lto:'+'ass'+'et'+'s@f'+'ir'+'esp'+'la'+'sh.'+'de'; return false;">asset<span class="obfuscator">.nosp@m.</span>s@fi<span class="obfuscator">.nosp@m.</span>respl<span class="obfuscator">.nosp@m.</span>ash.<span class="obfuscator">.nosp@m.</span>de</a> and we will be happy to help!</b></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Documentation variants</h1>
<p >Please note, that our asset always includes a Documentation.zip file containing an offline version of this documentation. This offline version is pinned to the version you downloaded, while the online version from our website always covers the latest version available. On the other hand we can add some notes and new textual documentation quickly to the online docs while the offline version will not be updated before the next release so we recommend using the online version of this documentation available at <a href="https://unityassets.firesplash-entertainment.com/twitchintegration">https://unityassets.firesplash-entertainment.com/twitchintegration</a>.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Setup</h1>
<p >Setting up the system is as simple as adding the component <b>Twitch Integration Manager</b> (aka TIM - Class Name <a class="el" href="class_firesplash_1_1_unity_assets_1_1_twitch_integration_1_1_twitch_integration.html" title="This is the main behavior used to communicate with twitch">Firesplash.UnityAssets.TwitchIntegration.TwitchIntegration</a>) to a GameObject in your scene. You can then access it from your scripts. You can find all the methods under <a href="class_firesplash_1_1_unity_assets_1_1_twitch_integration_1_1_skeletons_1_1_twitch_pub_sub.html"><b>TwitchIntegration.PubSub</b></a> and <a href="class_firesplash_1_1_unity_assets_1_1_twitch_integration_1_1_skeletons_1_1_twitch_chat.html"><b>TwitchIntegration.Chat</b></a>. There is a documented Example included with this asset. Refer to the code for an overview of how you can use it. In the following introduction, "twitch" is a reference to TIM.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Using PubSub</h2>
<p >The PubSub part of this asset works the following way:</p><ol type="1">
<li>Register an OnConnectionEstablished event to send the subscriptions using <code>twitch.PubSub.OnConnectionEstablished.AddListener(() =&gt; { [...] });</code></li>
<li>Within this event, subscribe to a topic using the specidif subscribe method. For example this one: <code>twitch.PubSub.SubscribeToChannelPointsEvents(ChannelID, oAuthToken);</code></li>
<li>To actually handle this event, we also have to handle the event which is raised, when a notifcation comes in. For our example we do this using these lines of code: <code>twitch.PubSub.OnPointRewardEvent.AddListener((PubSubPointRewardEvent e) =&gt; { Debug.Log(e.Data.Redemption.RedeemedAt.ToString() + ": " + e.GetType().Name + ": Viewer " + e.Data.Redemption.User.DisplayName + " just redeemed " + e.Data.Redemption.Reward.Title + " for " + e.Data.Redemption.Reward.Cost + " Points."); });</code></li>
<li>When everything is set up, we finally connect to the PubSub edge service: <code>twitch.PubSub.Connect();</code></li>
</ol>
<h2><a class="anchor" id="autotoc_md5"></a>
Using the Chat Integration</h2>
<p >The Chat integration is quite simple. The Chat distinguished between Chat Messages and Commands so you can cleanly implement both. Just an example for this:</p><ol type="1">
<li>Register your event for normal chat messages - if required: <code>twitch.Chat.OnChatMessageReceived.AddListener((IRCMessage msg) =&gt; { [...] };</code></li>
<li>Register your event for Commands - if required: <code>twitch.Chat.OnChatCommandReceived.AddListener((IRCCommand com) =&gt; { [...] };</code></li>
<li>Finally connect to the chat: <code>twitch.Chat.Connect(channelName, oAuthToken);</code></li>
</ol>
<h1><a class="anchor" id="autotoc_md6"></a>
Correct Seat License Count</h1>
<p >Officially you need to buy a seat license in the asset store for any unity user working with the asset. As this is not an editor asset but a "game asset" it is hard to determine how many seaty you need, right? We are always trying ot make our assets affordable and still rock solid. We ask our customers to be fair players and buy licenses according to the actual usage and revenue. Here is a guideline: </p>
<h2><a class="anchor" id="autotoc_md7"></a>
For independent developers up to 5 team members working on your game (in total) and in compliance to the revenue terms of Unity "Free"...</h2>
<p >...we allow using this asset with a single seat license for unlimited projects as long as you <b>comply with the revenue terms for Unity "Free"</b> (no matter if you are actually uisng Plus for some reason, Pro and Enterprise excluded). We do only count people working on the game (artists, developers, game designer, ...). If you hire IT specialists, marketing etc they do not count. </p>
<h2><a class="anchor" id="autotoc_md8"></a>
For bigger independent dev teams, if you don't comply to the Unity Free license terms as a small team or if you are using Unity Pro or Enterprise...</h2>
<p >...we ask you to buy one license per team member who works on your project (in Unity). </p>
<h2><a class="anchor" id="autotoc_md9"></a>
For big studios and any enterprise licensee</h2>
<p >...we assume you are making a lot of money with your games. Great! While the license requirements still are met with one license per unity user, we <b>kindly request</b> you to buy one seat per unity user or per project using our asset depending on what count is higher.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Frequently Asked Questions</h1>
<h2><a class="anchor" id="autotoc_md11"></a>
How can I get that damn "OAuth token"?</h2>
<ul>
<li>Eigther using the <a href="https://twitchapps.com/tmi/">TMI generator</a> (only chat, no PubSub)</li>
<li>Or using <a href="https://twitchtokengenerator.com/">twitchtokengenerator.com</a></li>
<li>Or using another asset we made: <a href="https://assetstore.unity.com/packages/tools/integration/login-with-twitch-authentication-made-easy-227115">Login With Twitch - Authentication made easy</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md12"></a>
Why am I getting an ERR_BADAUTH on PubSub while Chat is working fine?</h2>
<p >Most likely you did not use your (numeric) Twitch Account ID to connect but your login name (which is fine for the chat but not working for PubSub). You need to use your channelID/userID for connecting to the PubSub service.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Where are incoming Raid/Host events? I can't find them in PubSub</h2>
<p >Twitch does not send a (documented) PubSub Event on incoming Raids/Hosts so this is not possible. Fortunately it does send the event through the twitch chat. You can find the events in the Chat implementation: <code>twitch.Chat.OnIncomingRaid</code> and <code>twitch.Chat.OnIncomingHost</code></p>
<h2><a class="anchor" id="autotoc_md14"></a>
When something goes wrong in the callbacks, the whole twitch integration stops working</h2>
<p >This is normal behaviour. We do not catch Exceptions in the callbacks as this might make debugging a lot more complicated in some cases. We recommend to add try...catch blocks within your callback methods to catch unexpected exceptions when you go into production.</p>
<div class="image">
<img src="fslogo.png" alt=""/>
</div>
     </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Asset created by <a href="https://www.firesplash-entertainment.com"><img class="footer" src="fslogo.png" height="31" alt="Firesplash Entertainment"/></a> </li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> </li>
  </ul>
</div>
</body>
</html>
